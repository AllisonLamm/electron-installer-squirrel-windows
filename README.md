# electron-installer-squirrel-windows [![][appveyor_img]][appveyor_url]

Grunt plugin that builds Windows installers for [Electron][electron] apps
using [Squirrel][squirrel].

## Installation

```
# For use in npm scripts
npm i electron-installer-squirrel-windows --save-dev

# For use from cli
npm i electron-installer-squirrel-windows -g
```

## Usage

```
```

### API

```javascript
var createDMG = require('electron-installer-squirrel-windows')
createInstaller(opts, function done (err) { })
```
#### createInstaller(opts, callback)

##### opts
**Required**
`path` - *String*
The directory generated by [electron-packager][electron-packager].

**Optional**

`name` - *String*
The application name.


`overwrite` - *Boolean*
Overwrite existing installers if they already exist.

`debug` - *Boolean*
Enable debug message output.

`out` - *String*
The directory to put the DMG into. [Default: `process.cwd()`].

##### callback

`err` - *Error*
Contains errors if any.

## License

Apache 2.0


## Configuring

In your `Gruntfile.coffee` or `Gruntfile.js` add the following:

```js
grunt.loadNpmTasks('grunt-electron-installer')
```

Then assuming you have an Electron app built at the given `appDirectory`,
you can configure the installer task like so:

```js
'create-windows-installer': {
  appDirectory: '/tmp/build/my-app',
  outputDirectory: '/tmp/build/installer',
  authors: 'My App Inc.',
  exe: 'myapp.exe'
}
```

`electron-installer-squirrel-windows` will create a `.nupkg`, a
`RELEASES` file, and a `.exe` installer file in the `out` directory.

There are several configuration settings supported:

| Config Name           | Required | Description |
| --------------------- | -------- | ----------- |
| `appDirectory`        | Yes      | The folder path of your Electron app |
| `outputDirectory`     | No       | The folder path to create the `.exe` installer in. Defaults to the `installer` folder at the project root. |
| `loadingGif`          | No       | The local path to a `.gif` file to display during install. |
| `authors`             | Yes      | The authors value for the nuget package metadata. Defaults to the `author` field from your app's package.json file when unspecified. |
| `owners`              | No       | The owners value for the nuget package metadata. Defaults to the `authors` field when unspecified. |
| `exe`                 | No       | The name of your app's main `.exe` file. This uses the `name` field in your app's package.json file with an added `.exe` extension when unspecified. |
| `description`         | No       | The description value for the nuget package metadata. Defaults to the `description` field from your app's package.json file when unspecified. |
| `version`             | No       | The version value for the nuget package metadata. Defaults to the `version` field from your app's package.json file when unspecified. |
| `title`               | No       | The title value for the nuget package metadata. Defaults to the `productName` field and then the `name` field from your app's package.json file when unspecified. |
| `certificateFile`     | No       | The path to an Authenticode Code Signing Certificate |
| `certificatePassword` | No       | The password to decrypt the certificate given in `certificateFile` |
| `signWithParams`      | No       | Params to pass to signtool.  Overrides `certificateFile` and `certificatePassword`. |
| `setupIcon`           | No       | The ICO file to use as the icon for the generated Setup.exe |
| `remoteReleases`      | No       | A URL to your existing updates. If given, these will be downloaded to create delta updates |


## Handling Squirrel Events

Squirrel will spawn your app with command line flags on first run,
updates, and uninstalls. It is **very** important that your app handle
these events as _early_ as possible, and quit **immediately** after
handling them. Squirrel will give your app a short amount of time
(~15sec) to apply these operations and quit.

The [electron-squirrel-startup][electron-squirrel-startup] module will handle
the most common events for you, such as managing desktop shortcuts.  Just
add the following to the top of your `main.js` and you're good to go:

```js
if(require('electron-squirrel-startup')) return;
```

[appveyor_img]: https://ci.appveyor.com/api/projects/status/157smy0vsosp72bu/branch/master?svg=true
[appveyor_url]: https://ci.appveyor.com/project/mongodb-js/electron-installer-squirrel-windows/branch/master
[electron]: https://github.com/atom/electron
[squirrel]: https://github.com/Squirrel/Squirrel.Windows
[electron-squirrel-startup]: https://github.com/mongodb-js/electron-squirrel-startup
